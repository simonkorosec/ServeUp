(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],u=0,m=[];u<o.length;u++)n=o[u],i[n]&&m.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(s=!1)}s&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},i={app:0},a=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"000b":function(e,t,r){e.exports=r.p+"img/ready.86aab7c8.svg"},"0c86":function(e,t,r){"use strict";var s=r("627a"),i=r.n(s);i.a},"0fe5":function(e,t,r){},1330:function(e,t,r){"use strict";var s=r("bc8c"),i=r.n(s);i.a},"13a7":function(e,t,r){e.exports=r.p+"img/tables.bd7d9540.svg"},"14e1":function(e,t,r){e.exports=r.p+"img/history.014144ca.svg"},"1ea4":function(e,t,r){},"1f38":function(e,t,r){"use strict";var s=r("8958"),i=r.n(s);i.a},"21bb":function(e,t,r){"use strict";var s=r("bcc9"),i=r.n(s);i.a},"27b9":function(e,t,r){"use strict";var s=r("6408"),i=r.n(s);i.a},2813:function(e,t,r){},3082:function(e,t,r){"use strict";var s=r("1ea4"),i=r.n(s);i.a},3137:function(e,t,r){"use strict";var s=r("0fe5"),i=r.n(s);i.a},"3ca5":function(e,t,r){e.exports=r.p+"img/orders.bc2f05b2.svg"},"3fc6":function(e,t,r){"use strict";var s=r("c49a"),i=r.n(s);i.a},"442c":function(e,t,r){},"45d1":function(e,t,r){"use strict";var s=r("442c"),i=r.n(s);i.a},"4b7d":function(e,t,r){},"543e":function(e,t,r){"use strict";var s=r("702e"),i=r.n(s);i.a},"5c0b":function(e,t,r){"use strict";var s=r("5e27"),i=r.n(s);i.a},"5c7e":function(e,t,r){e.exports=r.p+"img/stats.83dedc8d.svg"},"5e27":function(e,t,r){},"5e39":function(e,t,r){e.exports=r.p+"img/logo2.1e81add5.svg"},"627a":function(e,t,r){},6408:function(e,t,r){},"702e":function(e,t,r){},8377:function(e,t,r){},"866e":function(e,t,r){"use strict";var s=r("8377"),i=r.n(s);i.a},"878c":function(e,t,r){"use strict";var s=r("8c55"),i=r.n(s);i.a},8958:function(e,t,r){},"8c55":function(e,t,r){},"8dfd":function(e,t,r){e.exports=r.p+"img/overview.d0fb831d.svg"},"8e7c":function(e,t,r){},9174:function(e,t,r){e.exports=r.p+"img/settings.84bf0914.svg"},a773:function(e,t,r){},adbc:function(e,t,r){"use strict";var s=r("2813"),i=r.n(s);i.a},ae35:function(e,t,r){"use strict";var s=r("c72d"),i=r.n(s);i.a},bc8c:function(e,t,r){},bcc9:function(e,t,r){},bdaf:function(e,t,r){e.exports=r.p+"img/new.6c25e3af.svg"},be53:function(e,t,r){"use strict";var s=r("8e7c"),i=r.n(s);i.a},c49a:function(e,t,r){},c72d:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var s=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],n={},o=n,l=(r("5c0b"),r("2877")),c=Object(l["a"])(o,i,a,!1,null,null,null);c.options.__file="App.vue";var d=c.exports,u=r("8c4f"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("div",{attrs:{id:"nav"}},[e._m(0),s("router-link",{attrs:{to:"/home/orders"}},[s("img",{attrs:{src:r("3ca5"),alt:"O"}}),s("p",[e._v("Trenutna Naročila")])]),s("router-link",{attrs:{to:"/home/history",append:""}},[s("img",{attrs:{src:r("14e1"),alt:"O"}}),s("p",[e._v("Zgodovina Naročil")])]),s("router-link",{attrs:{to:"/home/QRCode",append:""}},[s("img",{attrs:{src:r("13a7"),alt:"O"}}),s("p",[e._v("Mize")])]),s("router-link",{attrs:{to:"/home/stats",append:""}},[s("img",{attrs:{src:r("5c7e"),alt:"O"}}),s("p",[e._v("Statistika")])]),s("router-link",{attrs:{id:"su-nav-settings",to:"/",append:""},on:{click:e.logOut}},[s("img",{attrs:{src:r("9174"),alt:"O"}}),s("p",[e._v("Log out")])])],1),s("router-view")],1)},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"su-top-bar"}},[s("img",{attrs:{src:r("5e39")}}),s("p",[e._v("ServeUp")])])}],f={name:"Home",data:function(){return{}},methods:{logOut:function(){this.$session.destroy()}},beforeCreate:function(){try{this.$session.exists()?console.log("obstaja"):(console.log("NE obstaja"),this.$router.push({name:"login"}))}catch(e){console.log("error before",e),this.$router.push({name:"login"})}}},v=f,h=(r("21bb"),Object(l["a"])(v,m,p,!1,null,null,null));h.options.__file="Home.vue";var _=h.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"su-orders"}},[e._m(0),r("div",{attrs:{id:"su-orders-container"}},[r("div",{attrs:{id:"su-time-line-box"}},[e._l(e.timeSlots,function(t,s){return r("time-line",{key:s},[r("template",{slot:"timeLabel"},[e._v(e._s(t[3]))]),r("template",{staticClass:"su-time-line-item-new",slot:"sectionNew"},e._l(t[0],function(e){return r("time-line-item",{key:e.orderId,staticClass:"su-time-line-item-new",class:{suHere:e.isHere},attrs:{"order-id":e.orderId}})})),r("template",{staticClass:"su-time-line-item-making",slot:"sectionMaking"},e._l(t[1],function(e){return r("time-line-item",{key:e.orderId,staticClass:"su-time-line-item-making",class:{suHere:e.isHere},attrs:{"order-id":e.orderId}})})),r("template",{staticClass:"su-time-line-item-new",slot:"sectionReady"},e._l(t[2],function(e){return r("time-line-item",{key:e.orderId,staticClass:"su-time-line-item-ready",class:{suHere:e.isHere},attrs:{"order-id":e.orderId}})}))],2)}),e.isEmpty(e.orderCards)?e._e():r("div",{staticClass:"su-time-section-footer"})],2),r("div",{attrs:{id:"su-time-section-box"}},[e.noOrders?r("div",[r("p",{staticClass:"su-no-orders"},[e._v("Trenutno ni naročil")])]):e._e(),e._l(e.timeSlots,function(t,s){return r("time-section",{key:s},[r("template",{slot:"timeLabel"},[e._v(e._s(t[3]))]),r("template",{slot:"sectionNew"},e._l(t[0],function(t){return r("order-card",{key:t.orderId,class:{suHereNew:t.isHere,highlighted:t.isHighlighted},attrs:{"order-id":t.orderId,id:"su-card-"+t.orderId}},[r("template",{slot:"arrivalTime"},[e._v(e._s(t.displayTime))]),r("template",{slot:"ownerName"},[e._v(e._s(t.tableName))]),r("template",{slot:"priceTotal"},[e._v(e._s(t.priceTotal))]),r("template",{slot:"orderItems"},e._l(t.orderItems,function(t){return r("order-card-item",{key:t.id},[r("template",{slot:"amount"},[e._v(e._s(t.amount))]),r("template",{slot:"foodName"},[e._v(e._s(t.name))]),r("template",{slot:"prepTime"},[e._v(e._s(t.prepTime))])],2)})),r("template",{slot:"totalPrepTime"},[e._v(e._s(t.totalPrepTime))])],2)})),r("template",{slot:"sectionMaking"},e._l(t[1],function(t){return r("order-card",{key:t.orderId,class:{suHereMaking:t.isHere,highlighted:t.isHighlighted},attrs:{"order-id":t.orderId,id:"su-card-"+t.orderId}},[r("template",{slot:"arrivalTime"},[e._v(e._s(t.displayTime))]),r("template",{slot:"ownerName"},[e._v(e._s(t.tableName))]),r("template",{slot:"priceTotal"},[e._v(e._s(t.priceTotal))]),r("template",{slot:"orderItems"},e._l(t.orderItems,function(t){return r("order-card-item",{key:t.id},[r("template",{slot:"amount"},[e._v(e._s(t.amount))]),r("template",{slot:"foodName"},[e._v(e._s(t.name))]),r("template",{slot:"prepTime"},[e._v(e._s(t.prepTime))])],2)})),r("template",{slot:"totalPrepTime"},[e._v(e._s(t.totalPrepTime))])],2)})),r("template",{slot:"sectionReady"},e._l(t[2],function(t){return r("order-card",{key:t.orderId,class:{suHereReady:t.isHere,highlighted:t.isHighlighted},attrs:{"order-id":t.orderId,id:"su-card-"+t.orderId}},[r("template",{slot:"arrivalTime"},[e._v(e._s(t.displayTime))]),r("template",{slot:"ownerName"},[e._v(e._s(t.tableName))]),r("template",{slot:"priceTotal"},[e._v(e._s(t.priceTotal))]),r("template",{slot:"orderItems"},e._l(t.orderItems,function(t){return r("order-card-item",{key:t.id},[r("template",{slot:"amount"},[e._v(e._s(t.amount))]),r("template",{slot:"foodName"},[e._v(e._s(t.name))]),r("template",{slot:"prepTime"},[e._v(e._s(t.prepTime))])],2)})),r("template",{slot:"totalPrepTime"},[e._v(e._s(t.totalPrepTime))])],2)}))],2)}),e.isEmpty(e.orderCards)?e._e():r("div",{staticClass:"su-time-section-footer"})],2)])])},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"su-top-bar"},[s("div",{staticClass:"pregled"},[s("img",{attrs:{src:r("8dfd")}}),s("p",[e._v("Pregled")])]),s("div",[s("img",{attrs:{src:r("bdaf")}}),s("p",[e._v("Nova naročila")])]),s("div",[s("img",{attrs:{src:r("da49")}}),s("p",[e._v("V pripravi")])]),s("div",[s("img",{attrs:{src:r("000b")}}),s("p",[e._v("Pripravljeno")])])])}],y=(r("6762"),r("2fdb"),r("55dd"),r("456d"),r("ac6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-time-section"},[r("div",{staticClass:"su-time-section-divider",on:{click:e.toggleContent}},[r("p",[e._t("timeLabel")],2)]),e.visible?r("div",{staticClass:"su-time-section-container"},[r("div",{staticClass:"su-time-section-new"},[e._t("sectionNew")],2),r("div",{staticClass:"su-time-section-making"},[e._t("sectionMaking")],2),r("div",{staticClass:"su-time-section-ready"},[e._t("sectionReady")],2)]):e._e()])}),C=[],T={name:"TimeSection",data:function(){return{visible:!0}},methods:{toggleContent:function(){this.visible=!this.visible}}},w=T,k=(r("543e"),Object(l["a"])(w,y,C,!1,null,"89ac6a0c",null));k.options.__file="TimeSection.vue";var I=k.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-order-card-body",class:e.highlighted=e.isHighlighted},[r("div",{staticClass:"su-order-card-header"},[r("p",{staticClass:"su-order-card-owner"},[e._t("ownerName")],2),r("p",{staticClass:"su-order-card-time"},[e._v("ob "),e._t("arrivalTime")],2),r("p",{staticClass:"su-order-card-total"},[e._t("priceTotal"),e._v("€")],2)]),r("div",{staticClass:"su-order-card-items"},[e._t("orderItems")],2),r("div",{staticClass:"su-order-card-footer"},[r("button",{on:{click:function(t){e.changeStatusCard()}}},[e._v("NASLEDNJI KORAK")]),r("p",[e._t("totalPrepTime"),e._v("m")],2)])])},O=[],j=(r("c5f6"),new s["a"]),H="https://serveup-backend.herokuapp.com/api/",N={name:"OrderCard",props:{orderId:Number},data:function(){return{isHighlighted:!1}},methods:{changeStatusCard:function(){j.$emit("changeStatus",this.orderId)}}},S=N,$=(r("dede"),Object(l["a"])(S,x,O,!1,null,"c850973e",null));$.options.__file="OrderCard.vue";var E=$.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-order-item-body"},[r("p",[e._t("amount"),e._v("x")],2),r("p",[e._t("foodName")],2),r("p",[e._t("prepTime"),e._v("m")],2)])},D=[],M={name:"OrderCardItem"},L=M,R=(r("1f38"),Object(l["a"])(L,P,D,!1,null,"4910fcda",null));R.options.__file="OrderCardItem.vue";var q=R.exports,z=r("bc3a"),Q=r.n(z),A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-time-line"},[r("div",{staticClass:"su-time-line-divider",on:{click:e.toggleContent}},[r("p",[e._t("timeLabel")],2)]),e.visible?r("div",{staticClass:"su-time-line-container"},[r("div",{staticClass:"su-time-line-new"},[e._t("sectionNew")],2),r("div",{staticClass:"su-time-line-making"},[e._t("sectionMaking")],2),r("div",{staticClass:"su-time-line-ready"},[e._t("sectionReady")],2)]):e._e()])},U=[],J={name:"TimeLine",data:function(){return{visible:!0}},methods:{toggleContent:function(){this.visible=!this.visible}}},F=J,V=(r("ee1c"),Object(l["a"])(F,A,U,!1,null,"515ecc5d",null));V.options.__file="TimeLine.vue";var Z=V.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-time-line-item",on:{click:function(t){e.highlightOrder()}}})},K=[],G={name:"TimeLineItem",props:{orderId:Number},methods:{highlightOrder:function(){console.log(this.orderId),j.$emit("highlight",this.orderId)}}},Y=G,W=(r("3082"),Object(l["a"])(Y,B,K,!1,null,"11f3a24e",null));W.options.__file="TimeLineItem.vue";var X=W.exports,ee=r("25c1"),te=(r("2ef0"),{name:"Orders",components:{TimeLineItem:X,TimeLine:Z,OrderCardItem:q,OrderCard:E,TimeSection:I},data:function(){return{orderCards:[],refreshInterval:5e3,refreshTimer:null,scrollOptions:{container:"#su-time-section-box",easing:"ease-in",offset:-60,force:!0,cancelable:!0,onStart:function(e){},onDone:function(e){},onCancel:function(){},x:!1,y:!0}}},computed:{noOrders:function(){return 0===this.orderCards.length},timeSlots:function(){var e=this,t={};return this.orderCards.forEach(function(r){var s=r.arrivalTime;s.setSeconds(0),s.getMinutes()<30?s.setMinutes(0):s.setMinutes(30),s in t||(t[s]=[[],[],[],e.getDisplayTime(s)]),t[s][r.orderStatus].unshift(r)}),t}},methods:{isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},parseOrder:function(e){var t=e.cas_prevzema;"Z"!==t.slice(-1)&&(t+="Z"),console.log(e);var r={orderId:e.id_narocila,orderStatus:e.status,isHere:e.checked_in,arrivalTime:new Date(t),displayTime:"",ownerName:e.id_uporabnik,priceTotal:e.cena,totalPrepTime:0,isHighlighted:!1,tableName:"",orderItems:[]};return r.displayTime=this.getDisplayTime(r.arrivalTime),null!==e.id_miza&&"undefined"!==typeof e.id_miza?r.tableName=e.id_miza:r.tableName="Check in",Object.keys(e.jedi).forEach(function(t){var s=e.jedi[t],i=Math.floor(15*Math.random()+5);r.totalPrepTime+=i,r.orderItems.push({id:s.id_jed,amount:s.kolicina,name:s.ime_jedi,prepTime:i,price:s.cena})}),r},updateOrders:function(){var e=this,t=(this.orderCards,this.$session.get("restaurantId"));Q.a.get(H+"orders/refresh/?id_restavracija="+t).then(function(t){if(console.log("Refresh data",t.data),0!==t.data.new_orders.length&&(console.log("Refresh data rcv",t.data),Object.keys(t.data.new_orders).forEach(function(r){var s=e.parseOrder(t.data.new_orders[r]);e.orderCards.push(s)}),e.orderCards.sort(function(e,t){return e.arrivalTime-t.arrivalTime})),0!==t.data.cancelled_orders.length){console.log("Cancelled",t.data);for(var r=e.orderCards.length-1;r>=0;r--)t.data.cancelled_orders.includes(e.orderCards[r].orderId)&&e.orderCards.splice(r,1)}if(0!==t.data.checked_in_orders.length)for(var s=t.data.checked_in_orders,i=e.orderCards.length-1;i>=0;i--)for(var a=0;a<s.length;a++)s[a].id_narocila===e.orderCards[i].orderId&&(e.orderCards[i].isHere=!0,e.orderCards[i].tableName=s[a].qr)}).catch(function(e){console.log("refresh error",e)})},getDisplayTime:function(e){return e.getHours()+":"+("0"+e.getMinutes()).slice(-2)}},created:function(){var e=this,t=this.$session.get("restaurantId");Q.a.get(H+"orders/?id_restavracija="+t).then(function(t){console.log("Response data",t.data.data),Object.keys(t.data.data).forEach(function(r){if(3!==t.data.data[r].status){var s=e.parseOrder(t.data.data[r]);e.orderCards.push(s)}}),e.orderCards.sort(function(e,t){return e.arrivalTime-t.arrivalTime})})},mounted:function(){var e=this.orderCards,t=this.scrollOptions;j.$off(),j.$on("changeStatus",function(t){var r=null,s=-1;e.forEach(function(e,i){e.orderId===t&&(r=e,s=i)}),2===r.orderStatus&&e.splice(s,1),r.orderStatus+=1,Q.a.post(H+"orders/status_update/",{id_narocilo:r.orderId,status:r.orderStatus}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}),j.$on("highlight",function(r){var s=e.filter(function(e){return e.orderId===r})[0];s.isHighlighted=!0;var i="#su-card-"+r;ee["a"].scrollTo(i,200,t),setTimeout(function(){s.isHighlighted=!1,console.log("timeout")},1e3)});var r=this;this.refreshTimer=setInterval(function(){r.updateOrders()},r.refreshInterval)},beforeDestroy:function(){clearInterval(this.refreshTimer),j.$off("changeStatus"),j.$off("highlight")}}),re=te,se=(r("45d1"),Object(l["a"])(re,g,b,!1,null,"26032836",null));se.options.__file="Orders.vue";var ie=se.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"su-history"}},[r("div",{staticClass:"su-history-date"},[r("button",{class:{grayed:e.noPrev},on:{click:e.prevTab}},[e._v(" < ")]),r("p",{on:{click:function(t){e.showCalendar=!e.showCalendar}}},[e._v(e._s(e.getDisplayDate(e.currentDate)))]),r("button",{class:{grayed:e.noNext},on:{click:e.nextTab}},[e._v(" > ")]),e.showCalendar?r("div",{staticClass:"su-history-calendar"},[r("p",{staticClass:"su-calendar-title"},[e._v("Pick a day")]),e._l(e.dates,function(t){return r("p",{on:{click:function(r){e.toDate(t)}}},[e._v("\n                "+e._s(e.getDisplayDate(t))+"\n            ")])})],2):e._e()]),r("div",{staticClass:"su-history-container"},[r("div",{staticClass:"su-history-line-box"},e._l(e.historyTabs[e.currentDate][0],function(t){return r("history-line",{key:t[1]},[r("template",{slot:"timeLabel"},[e._v(e._s(t[1]))]),r("template",{slot:"lineItems"},e._l(t[0],function(e){return r("history-line-item",{key:e.orderId,attrs:{"order-id":e.orderId}})}))],2)})),e._l(e.historyTabs,function(t,s){return s===String(e.currentDate)?r("history-tab",[r("template",{slot:"historyTimeSections"},e._l(t[0],function(t){return r("history-section",[r("template",{slot:"timeLabel"},[e._v(e._s(t[1]))]),r("template",{slot:"historyCards"},e._l(t[0],function(t){return r("history-card",{key:t.orderId,attrs:{"order-id":t.orderId}},[r("template",{slot:"arrivalTime"},[e._v(e._s(t.displayTime))]),r("template",{slot:"ownerName"}),r("template",{slot:"priceTotal"},[e._v(e._s(t.priceTotal))]),r("template",{slot:"historyItems"},e._l(t.orderItems,function(t){return r("history-card-item",{key:t.id},[r("template",{slot:"amount"},[e._v(e._s(t.amount))]),r("template",{slot:"foodName"},[e._v(e._s(t.name))]),r("template",{slot:"price"},[e._v(e._s(t.price))])],2)}))],2)}))],2)}))],2):e._e()})],2)])},ne=[],oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-history-tab"},[e._t("historyTimeSections")],2)},le=[],ce={name:"HistoryTab"},de=ce,ue=(r("27b9"),Object(l["a"])(de,oe,le,!1,null,"20a9b3a5",null));ue.options.__file="HistoryTab.vue";var me=ue.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-history-time-section"},[r("div",{staticClass:"su-history-time-section-divider",on:{click:e.toggleContent}},[r("p",[e._t("timeLabel")],2)]),e.visible?r("div",{staticClass:"su-history-section-container"},[e._t("historyCards")],2):e._e()])},fe=[],ve={name:"HistorySection",data:function(){return{visible:!0}},methods:{toggleContent:function(){this.visible=!this.visible}}},he=ve,_e=(r("be53"),Object(l["a"])(he,pe,fe,!1,null,"72e3d8d3",null));_e.options.__file="HistorySection.vue";var ge=_e.exports,be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-card-wrapper"},[r("div",{staticClass:"su-history-card-body",class:e.highlightedH=e.isHighlightedH,attrs:{id:"su-card-h-"+e.orderId}},[r("div",{staticClass:"su-history-card-header"},[r("p",{staticClass:"su-history-card-owner"},[e._t("ownerName")],2),r("p",{staticClass:"su-history-card-time"},[e._v("Ob "),e._t("arrivalTime")],2),r("p",{staticClass:"su-history-card-total"},[e._t("priceTotal"),e._v("€")],2)]),r("div",{staticClass:"su-history-card-items"},[e._t("historyItems")],2)])])},ye=[],Ce={name:"HistoryCard",props:{orderId:Number},data:function(){return{isHighlightedH:!1}}},Te=Ce,we=(r("866e"),Object(l["a"])(Te,be,ye,!1,null,"3da20b54",null));we.options.__file="HistoryCard.vue";var ke=we.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-history-item-body"},[r("p",[e._t("amount"),e._v("x")],2),r("p",[e._t("foodName")],2),r("p",[e._t("price"),e._v("€")],2)])},xe=[],Oe={name:"HistoryCardItem"},je=Oe,He=(r("1330"),Object(l["a"])(je,Ie,xe,!1,null,"0d980b8e",null));He.options.__file="HistoryCardItem.vue";var Ne=He.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-history-line"},[r("div",{staticClass:"su-history-line-divider",on:{click:e.toggleContent}},[r("p",[e._t("timeLabel")],2)]),e.visible?r("div",{staticClass:"su-history-line-container"},[e._t("lineItems")],2):e._e()])},$e=[],Ee={name:"HistoryLine",data:function(){return{visible:!0}},methods:{toggleContent:function(){this.visible=!this.visible}}},Pe=Ee,De=(r("efee"),Object(l["a"])(Pe,Se,$e,!1,null,"0d0c28b6",null));De.options.__file="HistoryLine.vue";var Me=De.exports,Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"su-history-line-item-wrapper"},[r("div",{staticClass:"su-history-line-item",on:{click:function(t){e.highlightOrder()}}})])},Re=[],qe={name:"HistoryLineItem",props:{orderId:Number},methods:{highlightOrder:function(){console.log(this.orderId),j.$emit("highlightHis",this.orderId)}}},ze=qe,Qe=(r("3137"),Object(l["a"])(ze,Le,Re,!1,null,"143b64f6",null));Qe.options.__file="HistoryLineItem.vue";var Ae=Qe.exports,Ue={name:"History",components:{HistoryLineItem:Ae,HistoryLine:Me,HistoryCardItem:Ne,HistoryCard:ke,HistorySection:ge,HistoryTab:me},data:function(){return{monthNames:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],orderCards:[],dates:[],currentDate:new Date,noPrev:!1,noNext:!0,showCalendar:!1,scrollOptions:{container:"#su-time-section-box",easing:"ease-in",offset:-60,force:!0,cancelable:!0,onStart:function(e){},onDone:function(e){},onCancel:function(){},x:!1,y:!0}}},computed:{historyTabs:function(){var e=this,t={},r=new Date,s=this;this.orderCards.length;return this.orderCards.forEach(function(e,i){var a=e.arrivalTime;a.setSeconds(0),a.getMinutes()<30?a.setMinutes(0):a.setMinutes(30),r=new Date(a),r.setHours(0),r.setMinutes(0),r in t||(0===i?(t[r]=[[],!0],s.dates.push(r),s.currentDate=r):(t[r]=[[],!1],s.dates.push(r))),t[r][0].unshift(e)}),Object.keys(t).forEach(function(r){var s={};t[r][0].forEach(function(t){var r=t.arrivalTime;r.setSeconds(0),r.getMinutes()<30?r.setMinutes(0):r.setMinutes(30),r in s||(s[r]=[[],e.getDisplayTime(r)]),s[r][0].unshift(t)}),t[r][0]=s}),t}},methods:{parseOrder:function(e){var t={orderId:e.id_narocila,orderStatus:e.status,isHere:e.checked_in,arrivalTime:new Date(e.cas_prevzema),displayTime:"",ownerName:e.id_uporabnik,priceTotal:e.cena,totalPrepTime:0,isHighlighted:!1,orderItems:[]};return t.displayTime=this.getDisplayTime(t.arrivalTime),Object.keys(e.jedi).forEach(function(r){var s=e.jedi[r];t.totalPrepTime+=s.cena,t.orderItems.push({id:s.id_jed,amount:s.kolicina,name:s.ime_jedi,prepTime:s.cena,price:s.cena})}),t},toDate:function(e){this.currentDate=e,this.showCalendar=!1},prevTab:function(){for(var e=0;e<this.dates.length;e++)if(this.dates[e]===this.currentDate&&e<this.dates.length-1){this.currentDate=this.dates[e+1],this.noNext=!1,e+1===this.dates.length-1?this.noPrev=!0:this.noPrev=!1;break}},nextTab:function(){for(var e=0;e<this.dates.length;e++)if(this.dates[e]===this.currentDate&&e>0){this.currentDate=this.dates[e-1],this.noPrev=!1,this.noNext=e-1===0;break}},getDisplayDate:function(e){return null===e?"TIME":e.getDate()+". "+this.monthNames[e.getMonth()]+" "+e.getFullYear()},getDisplayTime:function(e){return null===e?"TIME":e.getHours()+":"+("0"+e.getMinutes()).slice(-2)}},created:function(){var e=this,t=this.$session.get("restaurantId");Q.a.get(H+"orders/?id_restavracija="+t).then(function(t){console.log("Response data",t.data.data),Object.keys(t.data.data).forEach(function(r){if(3===t.data.data[r].status){var s=e.parseOrder(t.data.data[r]);e.orderCards.push(s)}}),e.orderCards.sort(function(e,t){return t.arrivalTime-e.arrivalTime})})},mounted:function(){var e=this.orderCards;this.scrollOptions;j.$on("highlightHis",function(t){var r=e.filter(function(e){return e.orderId===t})[0];r.isHighlightedH=!0})},beforeDestroy:function(){j.$off("highlight")}},Je=Ue,Fe=(r("ae35"),Object(l["a"])(Je,ae,ne,!1,null,"4743fbee",null));Fe.options.__file="History.vue";var Ve=Fe.exports,Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("form",[s("img",{attrs:{id:"su-logo",src:r("5e39")}}),s("label",{staticClass:"company-name"},[e._v("ServeUp")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("br"),s("p",{attrs:{id:"error"}},[e._v(e._s(e.error))]),s("p",{staticClass:"forgot_pass"},[e._v("Forgot password?")]),s("br"),s("button",{attrs:{type:"button"},on:{click:function(t){e.login()}}},[e._v("Log in")]),s("br"),s("br"),s("label",[e._v("Don't have an account?")]),s("br"),s("router-link",{staticClass:"link",attrs:{to:"/sing_up"}},[e._v("Sign up")])],1)])},Be=[],Ke={name:"Login",data:function(){return{email:"",password:"",error:""}},methods:{login:function(){var e=this;""===this.email||""===this.password?this.error="Uporabnisko ime in geslo ne smeta biti prazna.":Q.a.post(H+"admin_user/login/",{email:this.email,password:this.password,format:"json"}).then(function(t){console.log(t.data),console.log("Uporabnik obstaja"),e.$router.push({path:"/home/orders"}),e.$session.start(),e.$session.set("restaurantId",t.data.id_restavracija),console.log("Session",e.$session.getAll())}).catch(function(t){console.log(t),e.error=t.response.data.description,console.log("Uporabnik ne obstaja")})}}},Ge=Ke,Ye=(r("878c"),Object(l["a"])(Ge,Ze,Be,!1,null,"097b8ae8",null));Ye.options.__file="Login.vue";var We=Ye.exports,Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("form",[s("img",{attrs:{id:"su-logo",src:r("5e39")}}),s("label",{staticClass:"company-name"},[e._v("ServeUp")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.full_name,expression:"full_name"}],attrs:{type:"text",placeholder:"Full name"},domProps:{value:e.full_name},on:{input:function(t){t.target.composing||(e.full_name=t.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.conf_password,expression:"conf_password"}],attrs:{type:"text",placeholder:"Confirm Password"},domProps:{value:e.conf_password},on:{input:function(t){t.target.composing||(e.conf_password=t.target.value)}}}),s("br"),s("p",{attrs:{id:"error"}},[e._v(e._s(e.error))]),s("br"),s("button",{attrs:{type:"button"},on:{click:function(t){e.register()}}},[e._v("Sign up")]),s("br"),s("br"),s("label",[e._v("Already have account?")]),s("br"),s("router-link",{staticClass:"link",attrs:{to:"/"}},[e._v("Log in")])],1)])},et=[],tt={name:"Register",data:function(){return{full_name:"",email:"",password:"",conf_password:"",error:""}},methods:{register:function(){var e=this;""===this.full_name||""===this.email||""===this.password||""===this.conf_password?this.error="Vsi podatki morajo biti vnešeni":Q.a.post(H+"admin_user/register/",{email:this.email,password:this.password,format:"json"}).then(function(t){console.log(t.data),console.log("Uporabnik uspesno dodan"),e.error="Registracija uspela."}).catch(function(t){console.log(t.response.data.description),e.error=t.response.data.description,console.log("Uporabnika ni bilo mogoče dodati")})}},mounted:function(){this.$session.exists()?console.log("obstaja"):console.log("ne obstaja")}},rt=tt,st=(r("fa6f"),Object(l["a"])(rt,Xe,et,!1,null,"4da57309",null));st.options.__file="Register.vue";var it=st.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",class:{printContainer:e.printMode},attrs:{id:"qr-container"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"qrtext",attrs:{type:"text",placeholder:"Vnesi ime mize"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),r("button",{staticClass:"insert",attrs:{type:"button"},on:{click:function(t){e.name()}}},[e._v("Generiraj QR kodo")]),r("button",{staticClass:"insert",attrs:{type:"button"},on:{click:e.printElem}},[e._v("Natisni")]),r("br"),r("div",{staticClass:"qr-code-container"},e._l(e.items,function(e){return r("QR",{staticClass:"qr-code-item",attrs:{value:e}})}))])},nt=[],ot=r("d7b0"),lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"qrticket"},[r("label",{attrs:{id:"printMe"}},[r("b",[e._v(e._s(e.value))])]),r("br"),r("qrcode-vue",{attrs:{value:e.value,size:e.size,level:"H"}})],1)},ct=[],dt={name:"QR",props:{value:String},data:function(){return{size:200,items:[]}},components:{QrcodeVue:ot["a"]},methods:{del:function(e){localStorage.items&&(this.items=JSON.parse(localStorage.getItem("items")),this.items.splice(this.items.indexOf(this.value),1),localStorage.setItem("items",JSON.stringify(this.items)),this.$router.go(e))}}},ut=dt,mt=(r("adbc"),Object(l["a"])(ut,lt,ct,!1,null,"61e97bce",null));mt.options.__file="QR.vue";var pt=mt.exports,ft={name:"QRCode",data:function(){return{items:[],value:"",printMode:!1}},components:{QR:pt,QrcodeVue:ot["a"]},beforeCreate:function(){try{this.$session.exists()?console.log("obstaja"):this.$router.push({name:"login"})}catch(e){this.$router.push({name:"login"})}},mounted:function(){var e=this;this.$session.exists()?console.log("obstaja"):console.log("ne obstaja"),Q.a.get(H+"restaurant/fetch_qr/?id_restavracija="+this.$session.get("restaurantId"),{}).then(function(t){e.items=t.data.data,console.log(e.items)}).catch(function(e){console.log(e)})},methods:{name:function(){console.log(this.$session.get("restaurantId")),Q.a.post(H+"restaurant/add_table/",{id_restavracija:this.$session.get("restaurantId"),qr:this.value}).then(function(e){console.log(e.status)}).catch(function(e){console.log(e)}),setTimeout(function(){var e=this;Q.a.get(H+"restaurant/fetch_qr/?id_restavracija="+this.$session.get("restaurantId"),{}).then(function(t){e.items=t.data.data,console.log(e.items)}).catch(function(e){console.log(e)})}.bind(this),1e3)},printElem:function(){for(var e=0;e<2;e++);for(var t=window.open("","PRINT","height=842,width=1000,titlebar=no"),r=document.getElementsByTagName("canvas"),s=t.document.body,i=0;i<r.length;i++){var a=r[i].parentElement.parentElement.querySelector("#printMe>b").innerHTML,n=document.createElement("P");n.style.fontSize="32px",n.style.margin="16px",n.style.color="gray";var o=document.createTextNode(String(a));n.appendChild(o),s.appendChild(n);var l=document.createElement("img"),c=r[i].toDataURL();l.src=c,l.style.padding="32px",l.style.border="2px solid lightgray",l.style.boxSizing="border-box",l.style.height="421px",s.appendChild(l)}return t.document.close(),t.focus(),t.print(),t.print(),t.close(),!0}}},vt=ft,ht=(r("3fc6"),Object(l["a"])(vt,at,nt,!1,null,"0b1cd956",null));ht.options.__file="QRCode.vue";var _t=ht.exports,gt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},bt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"su-stats"}},[r("p",{staticClass:"su-stats-upgrade"},[e._v("Prosimo nadgradite na "),r("span",[e._v("ServeUp")]),e._v(" Plus")])])}],yt={name:"Stats"},Ct=yt,Tt=(r("0c86"),Object(l["a"])(Ct,gt,bt,!1,null,"4e216f9a",null));Tt.options.__file="Stats.vue";var wt=Tt.exports;s["a"].use(u["a"]);var kt=new u["a"]({base:"../dist/",routes:[{path:"/",name:"login",component:We},{path:"/sing_up",name:"register",component:it},{path:"/home",name:"home",component:_,children:[{path:"orders",name:"orders",component:ie},{path:"history",name:"history",component:Ve},{path:"QRcode",name:"qrcode",component:_t},{path:"stats",name:"stats",component:wt}]}]}),It=r("2f62");s["a"].use(It["a"]);var xt=new It["a"].Store({state:{},mutations:{},actions:{}}),Ot=r("9483");Object(Ot["a"])("".concat("../dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var jt=r("a41e"),Ht=r.n(jt),Nt=r("0628"),St=r.n(Nt);s["a"].config.productionTip=!1,new s["a"]({router:kt,store:xt,render:function(e){return e(d)}}).$mount("#app");s["a"].use(St.a),s["a"].use(Ht.a)},da49:function(e,t,r){e.exports=r.p+"img/making.d9d9abff.svg"},dc2c:function(e,t,r){},dede:function(e,t,r){"use strict";var s=r("4b7d"),i=r.n(s);i.a},ee1c:function(e,t,r){"use strict";var s=r("dc2c"),i=r.n(s);i.a},efee:function(e,t,r){"use strict";var s=r("f486"),i=r.n(s);i.a},f486:function(e,t,r){},fa6f:function(e,t,r){"use strict";var s=r("a773"),i=r.n(s);i.a}});
//# sourceMappingURL=app.3204f6cd.js.map